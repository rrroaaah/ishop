// Mizoon Theme Scripts
// Auto-generated file


// File: article\script.js


// File: basic\script.js


// File: biography\script.js


// File: certificate-of-appreciation\script.js


// File: contact-us\script.js


// File: faq\script.js
class Accordion {
    constructor() {
        this.accordionItems = document.querySelectorAll('.accordion');
        this.init();
    }

    init() {
        this.accordionItems.forEach(item => {
            item.addEventListener('click', (event) => this.handleAccordionClick(event));
        });
    }

    handleAccordionClick(event) {
        const clickedItem = event.currentTarget;
        const parentElement = clickedItem.parentElement;
        const siblings = parentElement.querySelectorAll('.accordion');

        if (this.isIndependent(clickedItem)) {
            this.toggleAccordion(clickedItem);
            return;
        }

        this.closeOtherAccordions(siblings, clickedItem);
        this.toggleAccordion(clickedItem);
    }

    isIndependent(item) {
        return item.classList.contains('accordion-absolute');
    }

    toggleAccordion(item) {
        item.classList.toggle('active');
    }

    closeOtherAccordions(siblings, currentItem) {
        siblings.forEach(sibling => {
            if (sibling !== currentItem && !this.isIndependent(sibling)) {
                sibling.classList.remove('active');
            }
        });
    }
}

// Initialize accordion when DOM is loaded
new Accordion();

// File: feature-description-box\script.js


// File: logo-banner\script.js


// File: product-button-feature\script.js


// File: product-card\script.js


// File: product-category\script.js
const productsCategory = document.querySelectorAll(".product-category");

productsCategory.forEach(category => {
    category.addEventListener("click" , () => {
        productsCategory.forEach(active => active.classList.remove("active"));

        category.classList.add("active");
    });
});

// File: product-comment\script.js


// File: product-details\script.js


// File: product-qa\script.js


// File: product-specifications\script.js


// File: progress\script.js
class ProgressBar {
    constructor() {
        this.init();
    }

    init() {
        document.querySelectorAll('.progress-bar').forEach(bar => {
            const percentage = bar.dataset.progressPercentage;
            const duration = bar.dataset.progressDuration;
            const delay = bar.dataset.progressDelay;

            if (percentage) {
                bar.style.setProperty('--percentage', percentage);
            }

            if (duration) {
                bar.style.setProperty('--progress-animation-duration', duration);
            }

            if (delay) {
                bar.style.setProperty('--progress-animation-delay', delay);
            }
        });
    }
}

new ProgressBar();

// File: rating-card\script.js


// File: return-conditions\script.js


// File: story\card\script.js
class Modal {
    constructor() {
        this.initialPositions = new Map()
        this.init()
    }

    init() {
        this.initToggles()
        this.initClose()
        this.initDraggable()
    }

    initToggles() {
        document.querySelectorAll(".modal-toggle").forEach(btn => {
            const id = btn.dataset.modalId
            btn.addEventListener("click", () => {
                const modal = document.getElementById(id)
                if (!modal) return
                console.log(modal);
                const modalContent = modal.querySelector(".modal-content")
                const container = modal.closest(".modal-container") || modal
                container.style.zIndex = 999;

                modal.style.display = "flex"
                modal.classList.remove("hide")
                modal.classList.add("show")

                modalContent.addEventListener("animationend", () => {
                    if (modal.classList.contains("modal-remember-position") && modal.dataset.position) {
                        try {
                            const { top, left } = JSON.parse(modal.dataset.position)
                            modalContent.style.position = "absolute"
                            modalContent.style.top = `${top}px`
                            modalContent.style.left = `${left}px`
                            return
                        } catch (e) { }
                    }

                    if (!this.initialPositions.has(modal)) {
                        const rect = modalContent.getBoundingClientRect()
                        const parentRect = container.getBoundingClientRect()

                        const top = rect.top - parentRect.top
                        const left = rect.left - parentRect.left

                        this.initialPositions.set(modal, { top, left })
                    }

                    const initial = this.initialPositions.get(modal)
                    if (initial) {
                        modalContent.style.position = "absolute"
                        modalContent.style.top = `${initial.top}px`
                        modalContent.style.left = `${initial.left}px`
                    }
                }, { once: true })
            })
        })
    }

    initClose() {
        document.querySelectorAll(".modal-close").forEach(btn => {
            btn.addEventListener("click", () => {
                const modal = btn.closest(".modal-container, .modal-draggable")
                if (!modal) return
                const modalContent = modal.querySelector(".modal-content")

                modal.classList.remove("show")
                modal.classList.add("hide")

                modal.addEventListener("animationend", () => {
                    if (!modal.classList.contains("hide")) return

                    if (!modal.classList.contains("modal-remember-position") && modalContent) {
                        const initial = this.initialPositions.get(modal)
                        if (initial) {
                            modalContent.style.top = `${initial.top}px`
                            modalContent.style.left = `${initial.left}px`
                        }
                    }

                    modal.style.display = "none"
                    modal.classList.remove("hide")
                }, { once: true })
            })
        })
    }

    initDraggable() {
        document.querySelectorAll(".modal-draggable .modal-content .modal-header").forEach(header => {
            let isDragging = false
            let offsetX = 0
            let offsetY = 0
            const modalContent = header.closest(".modal-content")
            const modalContainer = header.closest(".modal-draggable")
            const parent = modalContainer.closest(".modal-container") || modalContainer
            modalContainer.style.zIndex = 999

            header.addEventListener("mousedown", e => {
                if (e.target.classList.contains("modal-close") || e.target.tagName === "BUTTON") return

                isDragging = true
                modalContent.classList.add("dragging")

                const rect = modalContent.getBoundingClientRect()
                const parentRect = parent.getBoundingClientRect()

                modalContent.style.left = `${rect.left - parentRect.left}px`
                modalContent.style.top = `${rect.top - parentRect.top}px`
                modalContent.style.position = "absolute"
                modalContent.style.margin = "0"

                offsetX = e.clientX - rect.left
                offsetY = e.clientY - rect.top
            })

            document.addEventListener("mousemove", e => {
                if (!isDragging) return

                const parentRect = parent.getBoundingClientRect()
                let newLeft = e.clientX - parentRect.left - offsetX
                let newTop = e.clientY - parentRect.top - offsetY

                if (modalContainer.classList.contains("modal-bounds")) {
                    const modalRect = modalContent.getBoundingClientRect()
                    const maxLeft = parentRect.width - modalRect.width
                    const maxTop = parentRect.height - modalRect.height

                    if (newLeft < 0) newLeft = 0
                    if (newTop < 0) newTop = 0
                    if (newLeft > maxLeft) newLeft = maxLeft
                    if (newTop > maxTop) newTop = maxTop
                }

                modalContent.style.left = `${newLeft}px`
                modalContent.style.top = `${newTop}px`
            })

            document.addEventListener("mouseup", () => {
                if (!isDragging) return
                isDragging = false
                modalContent.classList.remove("dragging")

                if (modalContainer.classList.contains("modal-remember-position")) {
                    modalContainer.dataset.position = JSON.stringify({
                        top: parseFloat(modalContent.style.top),
                        left: parseFloat(modalContent.style.left)
                    })
                }
            })
        })
    }
}
new Modal()

// File: story\toggle\script.js


// File: summary-opinion\script.js


// File: weblog-card\script.js

